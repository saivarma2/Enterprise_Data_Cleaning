{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sai Varma\\\\Desktop\\\\Enterprise_Data_Cleaning\\\\frontend\\\\src\\\\components\\\\FileUpload.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/FileUpload.js\nimport React, { useState, useRef } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onUploadSuccess,\n  showCleanButton = true,\n  hideFileInput = false\n}) => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [uploadMessage, setUploadMessage] = useState('');\n  const [filePath, setFilePath] = useState('');\n  const [cleanMessage, setCleanMessage] = useState('');\n  const dropRef = useRef(null);\n\n  // Handle file selection via input\n  const onFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n\n  // Handle drag events\n  const onDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (dropRef.current) {\n      dropRef.current.style.border = '2px dashed #007bff';\n    }\n  };\n  const onDragLeave = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (dropRef.current) {\n      dropRef.current.style.border = '2px dashed #ccc';\n    }\n  };\n  const onDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (dropRef.current) {\n      dropRef.current.style.border = '2px dashed #ccc';\n    }\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      setFile(e.dataTransfer.files[0]);\n      e.dataTransfer.clearData();\n    }\n  };\n  const onUpload = async () => {\n    if (!file) {\n      setUploadMessage(\"Please select a file before uploading.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      // Use the full backend URL if your frontend and backend run on different ports.\n      const res = await axios.post('http://localhost:5000/file/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setUploadMessage(res.data.message);\n      setFilePath(res.data.file_path);\n      onUploadSuccess(res.data.file_path);\n    } catch (err) {\n      var _err$response;\n      console.error(\"Upload error:\", err);\n      setUploadMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data.error) || 'Upload failed.');\n    }\n  };\n\n  // This function remains for backward compatibility (when showCleanButton=true)\n  const onClean = async () => {\n    if (!filePath) {\n      setCleanMessage(\"Please upload a file first.\");\n      return;\n    }\n    if (window.confirm(\"Do you want to start the cleaning process?\")) {\n      try {\n        const res = await axios.post('http://localhost:5000/file/clean', {\n          file_path: filePath,\n          confirm: true\n        });\n        setCleanMessage(res.data.message);\n        onUploadSuccess(filePath);\n      } catch (err) {\n        var _err$response2;\n        console.error(\"Clean error:\", err);\n        setCleanMessage(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data.error) || 'Cleaning failed.');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Upload Excel File\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dropRef,\n      onDragOver: onDragOver,\n      onDragLeave: onDragLeave,\n      onDrop: onDrop,\n      style: {\n        border: '2px dashed #ccc',\n        borderRadius: '5px',\n        padding: '20px',\n        textAlign: 'center',\n        marginBottom: '15px',\n        transition: 'border 0.3s ease',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center'\n      },\n      children: [hideFileInput ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Drag and drop your file here.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [file ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Selected File: \", file.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Drag and drop your file here, or click the button below to select a file.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: onFileChange,\n          accept: \".xlsx\",\n          style: {\n            marginBottom: '15px',\n            width: '80%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: uploadMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), showCleanButton && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Clean Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClean,\n        children: \"Clean Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: cleanMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"w2+QhA7uG6pv3LAkps8hc+4ocIc=\");\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useState","useRef","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUpload","onUploadSuccess","showCleanButton","hideFileInput","_s","file","setFile","uploadMessage","setUploadMessage","filePath","setFilePath","cleanMessage","setCleanMessage","dropRef","onFileChange","e","target","files","onDragOver","preventDefault","stopPropagation","current","style","border","onDragLeave","onDrop","dataTransfer","length","clearData","onUpload","formData","FormData","append","res","post","headers","data","message","file_path","err","_err$response","console","error","response","onClean","window","confirm","_err$response2","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","borderRadius","padding","textAlign","marginBottom","transition","display","flexDirection","alignItems","name","type","onChange","accept","width","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Sai Varma/Desktop/Enterprise_Data_Cleaning/frontend/src/components/FileUpload.js"],"sourcesContent":["// frontend/src/components/FileUpload.js\r\nimport React, { useState, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst FileUpload = ({ onUploadSuccess, showCleanButton = true, hideFileInput = false }) => {\r\n  const [file, setFile] = useState(null);\r\n  const [uploadMessage, setUploadMessage] = useState('');\r\n  const [filePath, setFilePath] = useState('');\r\n  const [cleanMessage, setCleanMessage] = useState('');\r\n  const dropRef = useRef(null);\r\n\r\n  // Handle file selection via input\r\n  const onFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  // Handle drag events\r\n  const onDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (dropRef.current) {\r\n      dropRef.current.style.border = '2px dashed #007bff';\r\n    }\r\n  };\r\n\r\n  const onDragLeave = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (dropRef.current) {\r\n      dropRef.current.style.border = '2px dashed #ccc';\r\n    }\r\n  };\r\n\r\n  const onDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (dropRef.current) {\r\n      dropRef.current.style.border = '2px dashed #ccc';\r\n    }\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      setFile(e.dataTransfer.files[0]);\r\n      e.dataTransfer.clearData();\r\n    }\r\n  };\r\n\r\n  const onUpload = async () => {\r\n    if (!file) {\r\n      setUploadMessage(\"Please select a file before uploading.\");\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    try {\r\n      // Use the full backend URL if your frontend and backend run on different ports.\r\n      const res = await axios.post('http://localhost:5000/file/upload', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n      setUploadMessage(res.data.message);\r\n      setFilePath(res.data.file_path);\r\n      onUploadSuccess(res.data.file_path);\r\n    } catch (err) {\r\n      console.error(\"Upload error:\", err);\r\n      setUploadMessage(err.response?.data.error || 'Upload failed.');\r\n    }\r\n  };\r\n\r\n  // This function remains for backward compatibility (when showCleanButton=true)\r\n  const onClean = async () => {\r\n    if (!filePath) {\r\n      setCleanMessage(\"Please upload a file first.\");\r\n      return;\r\n    }\r\n    if (window.confirm(\"Do you want to start the cleaning process?\")) {\r\n      try {\r\n        const res = await axios.post('http://localhost:5000/file/clean', {\r\n          file_path: filePath,\r\n          confirm: true\r\n        });\r\n        setCleanMessage(res.data.message);\r\n        onUploadSuccess(filePath);\r\n      } catch (err) {\r\n        console.error(\"Clean error:\", err);\r\n        setCleanMessage(err.response?.data.error || 'Cleaning failed.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Upload Excel File</h2>\r\n      {/* Single Column: Drag & Drop Area with optional file input and upload button */}\r\n      <div\r\n        ref={dropRef}\r\n        onDragOver={onDragOver}\r\n        onDragLeave={onDragLeave}\r\n        onDrop={onDrop}\r\n        style={{\r\n          border: '2px dashed #ccc',\r\n          borderRadius: '5px',\r\n          padding: '20px',\r\n          textAlign: 'center',\r\n          marginBottom: '15px',\r\n          transition: 'border 0.3s ease',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        {hideFileInput ? (\r\n          <p>Drag and drop your file here.</p>\r\n        ) : (\r\n          <>\r\n            {file ? (\r\n              <p>Selected File: {file.name}</p>\r\n            ) : (\r\n              <p>Drag and drop your file here, or click the button below to select a file.</p>\r\n            )}\r\n            <input \r\n              type=\"file\" \r\n              onChange={onFileChange} \r\n              accept=\".xlsx\" \r\n              style={{ marginBottom: '15px', width: '80%' }} \r\n            />\r\n          </>\r\n        )}\r\n        <button onClick={onUpload}>Upload</button>\r\n      </div>\r\n      <p>{uploadMessage}</p>\r\n      \r\n      {/* Conditionally render the Clean Data section if showCleanButton is true */}\r\n      {showCleanButton && (\r\n        <>\r\n          <h2>Clean Data</h2>\r\n          <button onClick={onClean}>Clean Data</button>\r\n          <p>{cleanMessage}</p>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}